{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{50:function(t,s,a){t.exports=a.p+\"assets/img/diagram.2abf8962.png\"},62:function(t,s,a){\"use strict\";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n(\"div\",{staticClass:\"content\"},[n(\"h1\",{attrs:{id:\"quick-start\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#quick-start\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Quick start\")]),n(\"p\",[n(\"strong\",[t._v(\"Before start:\")]),t._v(\" for better understanding, I will talk about only http APIs using fetch adapter.\")]),n(\"p\",[t._v(\"Just keep in mind that:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" apicase \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"@apicase/core\"')]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" fetch \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"@apicase/adapter-fetch\"')]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" doRequest \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"apicase\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"fetch\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"p\",[t._v(\"Here I will show you core features of Apicase based on \"),n(\"em\",[t._v('\"Create post\"')]),t._v(\" example.\")]),n(\"h2\",{attrs:{id:\"events-handling\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#events-handling\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Events handling\")]),n(\"p\",[t._v(\"Events allow you handle requests locally or globally via subscriptions.\")]),n(\"p\",[t._v(\"Also, Apicase follows \"),n(\"em\",[t._v('\"business logic failures are not exception\"')]),t._v(\" principle\")]),n(\"p\",[t._v(\"So we need at least 3 states for that:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Do you recognize axios? */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" payload \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"/api/posts\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  method\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"POST\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  body\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    title\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Hello, Apicase\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    text\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"This is my favourite post\"')]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" request \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Request is done */\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"done\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" postSubmitted\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"onDone\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"postSubmitted\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Request is failed but it's OK */\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"fail\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" invalidData\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"onFail\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"invalidData\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Unexpected error (may be code error or smth else) */\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"error\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" logError\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Bonus #4: cancel event */\")]),t._v(\"\\nrequest\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"cancel\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" undoSubmit\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"p\",[t._v(\"You still can use it as Promise or with \"),n(\"code\",[t._v(\"async/await\")]),t._v(\":\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" success\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" result \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"success\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* resolved */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* rejected */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),n(\"blockquote\",[n(\"p\",[t._v(\"â€“ Looks easy\"),n(\"br\"),t._v(\"\\nâ€“ But we haven't authentification\"),n(\"br\"),t._v(\"\\nâ€“ Just scroll down ðŸ˜ƒ\")])]),n(\"h2\",{attrs:{id:\"middlewares\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#middlewares\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Middlewares\")]),n(\"p\",[t._v(\"Middlewares allow you to change-on-fly/resolve/reject/retry API requests\")]),n(\"p\",[t._v(\"Apicase creates an async queue that consists of \"),n(\"em\",[t._v(\"before\")]),t._v(\" hooks, \"),n(\"em\",[t._v(\"request\")]),t._v(\", \"),n(\"em\",[t._v(\"resolve\")]),t._v(\" and \"),n(\"em\",[t._v(\"reject\")]),t._v(\" hooks.\")]),n(\"p\",[t._v(\"Look at this diagram:\")]),n(\"p\",[n(\"img\",{attrs:{src:a(50),alt:\"Request diagram\"}})]),n(\"p\",[t._v(\"Hook is an asynchronous function that accepts \"),n(\"em\",[t._v(\"payload\")]),t._v(\" and some callbacks.\")]),n(\"ul\",[n(\"li\",[t._v(\"Use \"),n(\"code\",[t._v(\"next\")]),t._v(\" to go to the next step (or next hook)\")]),n(\"li\",[t._v(\"Use \"),n(\"code\",[t._v(\"done\")]),t._v(\" to call done hooks and resolve request\")]),n(\"li\",[t._v(\"Use \"),n(\"code\",[t._v(\"fail\")]),t._v(\" to call fail hooks and reject request\")]),n(\"li\",[t._v(\"Use \"),n(\"code\",[t._v(\"retry\")]),t._v(\" to start call again with another payload\")])]),n(\"p\",[t._v(\"Hooks are passed in \"),n(\"code\",[t._v(\"hooks\")]),t._v(\" property\")]),n(\"h3\",{attrs:{id:\"why-is-it-important\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#why-is-it-important\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Why is it important?\")]),n(\"p\",[t._v(\"Still suffer with authentification? Just look at this:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" call \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'/api/posts'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  method\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'POST'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  body\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    title\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'Hello, Apicase'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    text\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'This is my favourite post'\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  hooks\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Add client token */\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"before\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" token \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" localStorage\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"getItem\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'token'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \\n        \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \\n        token\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* If it's failed, try to refresh token */\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"fail\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" retry\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"status \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!==\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token number\"}},[t._v(\"401\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" success \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" refreshToken\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"success\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"retry\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Just listen to it */\")]),t._v(\"\\ncall\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'done'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" postPublished\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\ncall\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'fail'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" shitHappened\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"blockquote\",[n(\"p\",[t._v(\"â€“ Easy-easy!\"),n(\"br\"),t._v(\"\\nâ€“ Should I write this on each call?? And... wait, what is \"),n(\"code\",[t._v(\"refreshToken\")]),t._v(\"?\"),n(\"br\"),t._v(\"\\nâ€“ You'll find out it soon ðŸ˜ƒ\")])]),n(\"h2\",{attrs:{id:\"services\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#services\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Services\")]),n(\"p\",[t._v(\"Apicase services provides an opportunity to split up your API logic onto services with unlimited inheritance.\")]),n(\"p\",[t._v(\"You can partially put payload, hooks and all of request params to service and then call it.\")]),n(\"p\",[t._v(\"You can extend services as much as you want.\")]),n(\"p\",[t._v(\"Services also have global events listeners that allows you to do some cool things.\")]),n(\"h3\",{attrs:{id:\"example-of-services-usage\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#example-of-services-usage\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Example of services usage\")]),n(\"p\",[t._v(\"Let's move our refresh-token logic into a separated file (e.g. \"),n(\"em\",[t._v(\"api.js\")]),t._v(\"):\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" fetch \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'@apicase/adapter-fetch'\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" ApiService \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'@apicase/services'\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Base options for all services */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"export\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" BaseService \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"ApiService\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  adapter\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" fetch\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'/api'\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'error'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" globalErrorLogger\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Yep, it's here */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"export\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" ReloginService \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" BaseService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"extend\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'auth/refresh'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  hooks\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"before\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" refreshToken \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" localStorage\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"getItem\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'refresh_token'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \\n        \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \\n        refreshToken\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\nReloginService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'done'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  localStorage\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"setItem\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'token'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" res\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"body\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"token\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* API services with auth logic */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"export\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" WithAuthService \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" BaseService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"extend\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  hooks\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Add client token */\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"before\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" token \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" localStorage\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"getItem\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'token'\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \\n        \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"headers\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \\n        token\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* If it's failed, try to refresh token */\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"fail\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" retry\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" next \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"status \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"!==\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token number\"}},[t._v(\"401\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" success \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"await\")]),t._v(\" ReloginService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"success\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"retry\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"else\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"next\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"result\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"p\",[t._v(\"And then, our API request now looks like in the first code example:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"import\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" WithAuthService \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"./api\"')]),t._v(\"\\n\\nWithAuthService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"posts\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  method\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"POST\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  body\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    title\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Hello, Apicase\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    text\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"This is my favourite post\"')]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"h3\",{attrs:{id:\"meta-information\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#meta-information\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Meta information\")]),n(\"p\",[t._v(\"Also, you can pass \"),n(\"code\",[t._v(\"meta\")]),t._v(\" property to request. It will be available in \"),n(\"strong\",[t._v(\"hooks\")]),t._v(\" only (not in adapter).\")]),n(\"p\",[t._v(\"You can use it to check whether request should use auth logic or not:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[t._v(\"ApiService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  url\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"posts\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  method\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"POST\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  meta\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" authReqired\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n  body\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    title\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"Hello, Apicase\"')]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    text\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token string\"}},[t._v('\"This is my favourite post\"')]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* or even better */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" WithAuthService \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" ApiService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"extend\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  meta\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" authRequired\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\nWithAuthService\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"doRequest\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* ... */\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"h3\",{attrs:{id:\"it-s-not-all-surprises\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#it-s-not-all-surprises\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" It's not all surprises\")]),n(\"p\",[t._v(\"Now, let's imagine that we have \"),n(\"strong\",[t._v(\"2 requests\")]),t._v(\" running \"),n(\"strong\",[t._v(\"at the same time\")]),t._v(\".\")]),n(\"p\",[t._v(\"And \"),n(\"strong\",[t._v(\"both\")]),t._v(\" of them are \"),n(\"strong\",[t._v(\"failed\")]),t._v(\" because of outdated token.\")]),n(\"p\",[t._v(\"What's now? Both of them will call \"),n(\"code\",[t._v(\"refreshToken\")]),t._v(\" service?\")]),n(\"p\",[t._v(\"No. Apicase solves that problem for you.\")]),n(\"p\",[t._v(\"Services contain \"),n(\"code\",[t._v(\"queue\")]),t._v(\" with all requests that are currently running.\")]),n(\"p\",[t._v(\"And it has some methods to deal with it:\")]),n(\"ul\",[n(\"li\",[n(\"strong\",[t._v(\"doRequest\")]),t._v(\" - just do request. It will push it to queue and remove on finish\")]),n(\"li\",[n(\"strong\",[t._v(\"pushRequest\")]),t._v(\" - do request after queue is finished\")]),n(\"li\",[n(\"strong\",[t._v(\"doSingleRequest\")]),t._v(\" - do request only if there are no currently running requests. Otherwise, it will return currently running request that you can subscribe to\")]),n(\"li\",[n(\"strong\",[t._v(\"doUniqueRequest\")]),t._v(\" - do request only if there are no currently running request with the same payload. Otherwise, it will return this request that you can subscribe to\")])]),n(\"p\",[t._v(\"So, to solve the problem, you can just replace \"),n(\"code\",[t._v(\"doRequest\")]),t._v(\" to \"),n(\"code\",[t._v(\"doSingleRequest\")]),t._v(\". That's all you need to be happy ðŸ˜ƒ\")]),n(\"h2\",{attrs:{id:\"adapters\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#adapters\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Adapters\")]),n(\"h3\",{attrs:{id:\"what-does-it-mean\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#what-does-it-mean\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" What does it mean?\")]),n(\"p\",[t._v(\"Apicase core doesn't know the ways to work with API. Instead, it just uses adapters.\")]),n(\"p\",[t._v(\"It makes Apicase much more flexible, because It's not limited by http-only requests.\")]),n(\"p\",[t._v(\"It also makes Apicase totally isomorphic because it's just a JS library that accepts any API and works with it.\")]),n(\"h3\",{attrs:{id:\"how-adapter-looks\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#how-adapter-looks\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" How adapter looks?\")]),n(\"p\",[t._v(\"Adapter is an object with the following structure:\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"const\")]),t._v(\" adapter \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Initial response state */\")]),t._v(\"\\n  createState\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* ... */\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Callback that accepts payload and resolve/reject methods */\")]),t._v(\"\\n  \"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"callback\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" payload\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" resolve\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" reject \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* ... */\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Method that prepares payload for callback */\")]),t._v(\"\\n  convert\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" payload \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* ... */\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n\\n  \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Merge strategy for adapters payload (used in services */\")]),t._v(\"\\n  merge\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"from\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" to\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=>\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* ... */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),n(\"p\",[t._v(\"This object just should be passed to \"),n(\"code\",[t._v(\"apicase\")]),t._v(\" or \"),n(\"code\",[t._v(\"ApiService\")]),t._v(\":\")]),n(\"pre\",{pre:!0,attrs:{class:\"language-javascript\"}},[n(\"code\",[n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Just request */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token function\"}},[t._v(\"apicase\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"adapter\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"opts\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\\n\"),n(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"/* Service */\")]),t._v(\"\\n\"),n(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"ApiService\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" adapter\"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),n(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\"opts \"),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),n(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),n(\"p\",[t._v(\"As you can see at the start we used \"),n(\"code\",[t._v(\"@apicase/adapter-fetch\")])]),n(\"h3\",{attrs:{id:\"what-adapters-we-have-for-now\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#what-adapters-we-have-for-now\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" What adapters we have for now?\")]),n(\"p\",[t._v(\"For now, apicase has only \"),n(\"code\",[t._v(\"fetch\")]),t._v(\" and \"),n(\"code\",[t._v(\"xhr\")]),t._v(\" official adapters.\")]),n(\"p\",[t._v(\"But we are planning to add \"),n(\"code\",[t._v(\"websocket\")]),t._v(\" support too and maybe some another cool things.\")])])}],o=a(0),e=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}